<!DOCTYPE html>
<html>
<head lang="es">
    <title>Ecuacion General de la recta</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="estilo.css">
</head>
<body>
    <div id="generar tabla"></div>
    
    <table border="6">
        <tr>
            <td>
                <canvas id="micanvas" width="1200px" height="470px">Tu navegador no soporta canvas.</canvas>
            </td>
        </tr>
    </table>

    <script language="javascript">
        // Variables para almacenar los puntos y otros valores

        var m, b, x1, y1, x2, y2, l,d;
        // Obtiene el elemento canvas y su contexto
        var c = document.getElementById("micanvas");
        var cxn = c.getContext("2d");
        var cont = 0;

         // Función para dibujar las coordenadas en el canvas
        function dcorde() {
            for (l = 50; l < 1150; l += 20) {
                cxn.moveTo(l, 230);
                cxn.lineTo(l, 240);
            }
             // Etiqueta los valores en el eje x
            
            var cont = -145;
            for (l = 40; l < 1150; l += 20) {
                cont += 5;
                cxn.font = "7pt Calibri";
                cxn.lineWidth = 0.9;
                cxn.strokeStyle = "red";
                cxn.strokeText(cont, l, 250);
            }
            // Dibuja las líneas horizontales
            for (l = 30; l < 430; l += 20) {
                cxn.moveTo(606, l);
                cxn.lineTo(612, l);
            }
            // Etiqueta los valores en el eje y
            cont = 55;
            for (l = 30; l < 430; l += 20) {
                cxn.font = "7pt Calibri";
                cxn.lineWidth = 0.9;
                cxn.strokeStyle = "red";
                cxn.strokeText(cont, 580, l);
                cont -= 5;
            }
            // Dibuja los ejes x e y
            cxn.strokeStyle = "black";
            cxn.stroke();
        
        cxn.moveTo(50, 235);
        cxn.lineTo(1150, 235);
        cxn.lineWidth = 2;
        cxn.strokeStyle = "red";
        cxn.stroke();

        cxn.moveTo(610, 30);
        cxn.lineTo(610, 430);
        cxn.lineWidth = 1;
        cxn.strokeStyle = "blue";
        cxn.stroke();
        // Dibuja las etiquetas de los ejes y la información adicional
        cxn.font = "20pt Calibri";
        cxn.lineWidth = 2;
        cxn.strokeStyle = "blue";
        cxn.strokeText("Y = mX + b", 25, 25);

        cxn.font = "20pt Calibri";
        cxn.lineWidth = 2;
        cxn.strokeStyle = "red";
        cxn.strokeText("-X", 20, 242);

        cxn.font = "20pt Calibri";
        cxn.lineWidth = 2;
        cxn.strokeStyle = "red";
        cxn.strokeText("X", 1160, 242);

        cxn.font = "20pt Calibri";
        cxn.lineWidth = 2;
        cxn.strokeStyle = "red";
        cxn.strokeText("-Y", 585, 460);

        cxn.font = "20pt Calibri";
        cxn.lineWidth = 2;
        cxn.strokeStyle = "red";
        cxn.strokeText("Y", 592, 23);
         // Dibuja información adicional
        cxn.fillStyle = "rgba(255,0,0,0.4)";
        cxn.shadowOffsetX = 5;
        cxn.shadowOffsetY = 4;
        cxn.shadowBlur = 3;
        cxn.shadowColor = "rgba(0, 255, 0, 1)";
        cxn.font = "20px Tahoma";
        cxn.fillText("Santiago Barbosa Y Diego Martinez ", 800, 420);

        return true;
    }
    
     // Función para dibujar la recta y mostrar la información
    function dlinea() {
        x1 = parseFloat(ecua.x1.value);
        y1 = parseFloat(ecua.y1.value);
        x2 = parseFloat(ecua.x2.value);
        y2 = parseFloat(ecua.y2.value);
         // Calcula la pendiente (m) y la intersección en y (b)
        m = (y2 - y1) / (x2 - x1);
        b = y1 - (m * x1);
        d = Math.pow(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2), 0.5);
         // Calcula el punto medio entre los puntos
        xm = (x1 + x2) / 2;
        ym = (y1 + y2) / 2;
        // Calcula las coordenadas de los puntos en el canvas
        if (x1 < 0) {
            x1 = Math.abs(x1 * 4);
            x1 = 610 - x1;
        } else {
            x1 = Math.abs(x1 * 4);
            x1 = 610 + x1;
        }

        if (x2 < 0) {
            x2 = Math.abs(x2 * 4);
            x2 = 610 - x2;
        } else {
            x2 = Math.abs(x2 * 4);
            x2 = 610 + x2;
            if (y1 < 0) {
    y1 = Math.abs(y1 * 4);
    y1 = 235 + y1;
} else {
    y1 = Math.abs(y1 * 4);
    y1 = 235 - y1;
}

if (y2 < 0) {
    y2 = Math.abs(y2 * 4);
    y2 = 232 + y2;
} else {
    y2 = Math.abs(y2 * 4);
    y2 = 235 - y2;
}
 // Dibuja la línea que representa la recta
cxn.moveTo(x1, y1);
cxn.lineTo(x1, y2);
cxn.lineWidth = 2;
cxn.strokeStyle = "green";
cxn.stroke();
 // Muestra la información adicional
cxn.font = "10pt Calibri";
cxn.lineWidth = 1;
cxn.strokeStyle = "blue";
cxn.strokeText("m:", 20, 380);
cxn.strokeStyle = "red";
cxn.strokeText(m, 50, 380);
cxn.strokeStyle = "blue";
cxn.strokeText("b:", 20, 400);
cxn.strokeStyle = "red";
cxn.strokeText(b, 50, 400);
cxn.strokeStyle = "green";
cxn.strokeText("Y = ", 20, 420);
cxn.strokeText(m + " X " + " + " + b, 50, 420);
cxn.strokeStyle = "blue";
cxn.strokeText("Distancia:", 20, 440);
cxn.strokeStyle = "red";
cxn.strokeText(d, 80, 440);
cxn.strokeStyle = "blue";
cxn.strokeText("Punto Medio:", 20, 460);
cxn.strokeStyle = "red";
cxn.strokeText("(" + xm + "," + ym + ")", 90, 460);
cxn.stroke();
}
    }

</script>

<body>
    
    <form name="ecua" id="ecua" action="" method="post">
        <table border = "6" class="tdatos">
            <caption><p>ECUACION GENERAL DE LA RECTA DANDO 2 PUNTOS CARTESIANOS</p></caption>
            <tr>
                <td>Punto No.1</td>
                <td>X1</td>
                <td><input type="number" min="-140" max="135" name="x1" required></td>
                <td>Y1</td>
                <td><input type="number" min="-50" max="50" name="y1" required></td>
                <td rowspan="3"><a href="https://www.usco.edu.co/"><img src="usco logo.png" alt="USCO"/></a> </td>
            </tr>

            <tr>
                <td>Punto No.2</td>
                <td>X2</td>
                <td><input type="number" min="-140" max="135" name="x2" required></td>
                <td>Y2</td>
                <td><input type="number" min="-50" max="50" name="y2" required></td>
            </tr>
            <tr>
                <td colspan="5">
                    <input type="button" name="calcula" value="Resolver Ecuacion" onclick="dlinea();">
                    <input type="button" name="dibujacord" value="Dibujar Coordenadas" onclick="dcorde();">
                    <h2> <center> Recta (y = mx + b)</center></h2>
                        
                    </select>
                        
                </td>

            </tr>
        </table>
        
    </form>
    
</body>
</html> 